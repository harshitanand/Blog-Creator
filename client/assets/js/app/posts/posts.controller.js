// Generated by CoffeeScript 1.10.0
(function() {
  angular.module('blogapp').controller('PostCtrl', function($scope, $http, $routeParams) {
    var frmserv, uri;
    $scope.post = null;
    frmserv = null;
    $scope.cancomment = true;
    uri = 'http://localhost:8000/posts/' + $routeParams.id + '/';
    $http.get(uri).success(function(data) {
      $scope.post = data;
      return frmserv = data;
    });
    $scope.formshow = function() {
      return $scope.cancomment = !$scope.cancomment;
    };
    $scope.liked = function() {
      frmserv.likes++;
      return $http.patch(uri, frmserv).success(function(data) {
        return $scope.post = data;
      });
    };
    return $scope.addcomment = function() {
      var comment;
      if ($scope.comment === void 0 || $scope.author === void 0) {
        return;
      }
      comment = {
        body: $scope.comment,
        author: $scope.author
      };
      frmserv.comments.push(comment);
      $http.put(uri, frmserv).success(function(data) {
        return $scope.post = data;
      });
      return $scope.cancomment = !$scope.cancomment;
    };
  });

}).call(this);
